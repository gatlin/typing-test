!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var r,o;r=[n,t,n(1),n(4)],o=function(e,t,n,r){"use strict";function o(e,t){for(var n=[],o=0,i=!1;!i;){var a=r.random_word();if(o+=a.length*t+t,o>=e){i=!0;break}n.push({expected:a,actual:"",incorrect:!1})}return n}function i(){return{initialized:!1,typed_so_far:"",lines:[],current_word:0,current_line:0,words_box_width:0,char_width:0,words_typed:0,active:!1,finished:!1,cpm:0,num_words_incorrect:0}}function a(e){return e.reduce(function(e,t){return e.concat(t)},[])}function s(e,t){var n={};return n[d.Init]=function(){if(!t.initialized){t.words_box_width=e.data.offsetWidth,t.char_width=document.getElementById("current-word").offsetWidth/3;for(var n=0;n<3;n++){var r=o(t.words_box_width,t.char_width);t.lines.push(r)}t.initialized=!0}return t},n[d.UpdateInput]=function(){t.active||t.finished||(t.active=!0,f.send(!0)),t.typed_so_far=e.data;var n=t.typed_so_far.split(" "),r=2===n.length;if(r){var i=t.lines[t.current_line][t.current_word];if(i.actual=t.typed_so_far.replace(/\s+$/,""),i.expected!==i.actual?(t.num_words_incorrect++,i.incorrect=!0):(i.incorrect&&t.num_words_incorrect--,i.incorrect=!1),t.current_word++,t.current_word>=t.lines[t.current_line].length){var a=o(t.words_box_width,t.char_width);t.lines.push(a),t.current_word=0,t.current_line++}t.typed_so_far="",t.words_typed++}return t},n[d.KeyDown]=function(){var n=8===e.data&&""===t.typed_so_far&&t.words_typed>0;if(n){if(t.current_word--,t.words_typed--,t.current_word<0&&t.current_line>0){t.current_line--;var r=t.lines[t.current_line];t.current_word=r.length-1}t.typed_so_far=t.lines[t.current_line][t.current_word].actual}return t},n[d.Stop]=function(){if(t.active){t.active=!1,t.finished=!0;var e=a(t.lines).slice(0,t.words_typed).filter(function(e){return!e.incorrect});t.cpm=0;for(var n=0;n<e.length;n++)t.cpm+=e[n].expected.length;t.cpm+=e.length}return t},n[e.type]()}function u(e,t){void 0===t&&(t=null);var r=e.map(function(e,r){var o={class:"word",id:"word-"+e.expected};return null!==r&&r===t&&(o.class=o.class+" current-word"),e.incorrect&&(o.class=o.class+" incorrect"),n.el("span",o,[e.expected])});return r}function c(e){var t=[];if(e.initialized)for(var r=0===e.current_line?0:e.current_line-1,o=0===e.current_line?2:e.current_line+1,i=r;i<=o;i++){var a=e.lines[i],s=u(a,e.current_line===i?e.current_word:null);t.push(n.el("div",{class:"line"},s))}else t.push(n.el("span",{class:"word",id:"current-word"},["foo"]));var c;if(e.finished){var l=[n.el("p",{},["Refresh to try again, maybe after a two minute break."])];if(e.num_words_incorrect>0){var d=e.num_words_incorrect>1?" words":" word";l.unshift(n.el("p",{},["It would have been higher, but you got "+e.num_words_incorrect+d+" incorrect."]))}c=n.el("div",{id:"below-box",class:"fade-in"},[n.el("h2",{id:"score"},["You typed "+e.cpm+" characters per minute!"]),n.el("span",{},l)])}else c=n.el("div",{id:"below-box"},[n.el("input",{type:"text",id:"typing-input",key:"typing-input",autofocus:"autofocus",value:e.typed_so_far},[]),n.el("div",{id:"some-text",class:e.active?"begun":""},[n.el("p",{},["Just start typing to begin."])])]);return n.el("div",{id:"typing-app"},[n.el("div",{id:"words-box-outer"},[n.el("div",{id:"words-box"},t).subscribe(p)]),c])}function l(e){e.events.input.filter(function(e){return"typing-input"===e.getId()}).map(function(e){return{type:d.UpdateInput,data:e.getValue()}}).connect(e.actions),e.events.keydown.filter(function(e){return"typing-input"===e.getId()}).map(function(e){return{type:d.KeyDown,data:e.getRaw().keyCode}}).connect(e.actions),p.filter(function(e){return null!==e}).map(function(e){return{type:d.Init,data:e}}).connect(e.actions),f.filter(function(e){return e===!0}).recv(function(t){window.setTimeout(function(){e.actions.send({type:d.Stop})},6e4)})}t.__esModule=!0;var d,p=new n.Mailbox(null),f=new n.Mailbox(!1);!function(e){e[e.Init=0]="Init",e[e.UpdateInput=1]="UpdateInput",e[e.KeyDown=2]="KeyDown",e[e.Stop=3]="Stop"}(d||(d={}));new n.App({domRoot:"main",eventRoot:"main",state:i(),update:s,render:c,main:l}).start()}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n,t,n(2),n(3),n(2),n(3)],o=function(e,t,n,r,o,i){"use strict";function a(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function s(e){for(var t={},n=0;n<e.length;n++){var r=e[n];t[r]=new o.Signal(function(e){return new c(e)})}return t}function u(e){if(Array.isArray(e)){for(var t={},n=0;n<e.length;n++){var r=e[n];t[r]=o.Signal.make()}return t}var i="undefined"==typeof e||null===e?{outbound:[],inbound:[]}:e;for(var a in i){for(var s=i[a],u={},n=0;n<s.length;n++){var r=s[n];u[r]=o.Signal.make()}i[a]=u}return i}t.__esModule=!0,a(n),t.el=r.el;var c=function(){function e(e){this.raw=e,this.classes=e.target.className.trim().split(/\s+/g)||[],this.id=e.target.id}return e.prototype.hasClass=function(e){return this.classes.indexOf(e)!==-1},e.prototype.getClasses=function(){return this.classes},e.prototype.getId=function(){return this.id},e.prototype.getValue=function(){return this.raw.target.value},e.prototype.getRaw=function(){return this.raw},e}();t.AlmEvent=c;var l=["click","dblclick","keyup","keydown","keypress","blur","focusout","input","change","load"],d=function(){function e(e){this.gui="undefined"==typeof e.gui||e.gui,this.eventRoot="string"==typeof e.eventRoot?document.getElementById(e.eventRoot):"undefined"==typeof e.eventRoot?document:e.eventRoot,this.domRoot="string"==typeof e.domRoot?document.getElementById(e.domRoot):"undefined"==typeof e.domRoot?document.body:e.domRoot;var t=l.concat("undefined"!=typeof e.extraEvents?e.extraEvents:[]);this.events=s(t),this.ports=u(e.ports);var n=new o.Mailbox(null),r=n.reduce(e.state,function(t,n){return null===t?n:e.update(t,n)});this.scope=Object.seal({events:this.events,ports:this.ports,actions:n,state:r}),e.main(this.scope),this.render=this.gui?e.render:null}return e.prototype.registerEvent=function(e,t){var n=function(e){return t.send(e)};this.eventRoot.addEventListener(e,n,!0)},e.prototype.editScope=function(e){return e(this.scope),this},e.prototype.setEventRoot=function(e){return this.eventRoot="string"==typeof e?document.getElementById(e):e,this},e.prototype.setDomRoot=function(e){return this.domRoot="string"==typeof e?document.getElementById(e):e,this},e.prototype.start=function(){for(var e in this.events){var t=this.events[e];t.numListeners()>0&&this.registerEvent(e,t)}if(this.gui){var n=this.scope.state.map(this.render);i.render(n,this.domRoot)}return{ports:this.scope.ports,state:this.scope.state}},e}();t.App=d}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o,i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();r=[n,t],o=function(e,t){"use strict";function n(e,t){t.forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(n){e.prototype[n]=t.prototype[n]})})}function r(e){setTimeout(e,0)}t.__esModule=!0,t.derive=n;var o=function(){function e(){}return e.pipe=function(e){for(var t=e[0],n=1;n<e.length;n++)t=t.flatMap(e[n]);return t},e.prototype.flatMap=function(e){return this.map(e).flatten()},e.prototype.pipe=function(e){for(var t=this,n=0;n<e.length;n++)t=t.flatMap(e[n]);return t},e}();t.FlatMap=o,t.async=r;var a=function(){function e(e){this.fn=e,this.listeners=[]}return e.prototype.connect=function(e){return this.listeners.push(e),e},e.make=function(){return new e(function(e){return e})},e.prototype.send=function(e){var t=this.fn(e);if("undefined"!=typeof t)for(var n=0;n<this.listeners.length;n++){var r=this.listeners[n];r.send(t)}},e.prototype.recv=function(t){this.connect(new e(function(e){return t(e)}))},e.prototype.map=function(t){var n=new e(t);return this.connect(n)},e.prototype.filter=function(t){var n=new e(function(e){if(t(e))return e});return this.connect(n)},e.prototype.reduce=function(t,n){var r=t,o=new e(function(e){return r=n(e,r)});return this.connect(o)},e.prototype.numListeners=function(){return this.listeners.length},e}();t.Signal=a;var s=function(e){function t(t){var n=e.call(this,function(e){return e})||this;return n.send(t),n}return i(t,e),t.prototype.send=function(t){var n=this;r(function(){e.prototype.send.call(n,t)})},t.prototype.recv=function(t){e.prototype.recv.call(this,t)},t}(a);t.Mailbox=s}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n,t],o=function(e,t){"use strict";function n(e,t,n){var r="undefined"==typeof n?[]:n.map(function(e,t){return"string"==typeof e?new c(e,[],u.Text):e});return new c({tag:e,attrs:t},r,u.Node)}function r(e){if(null===e)return null;if(e.treeType===u.Text)return document.createTextNode(e.content);var t=document.createElement(e.content.tag);for(var n in e.content.attrs)t.setAttribute(n,e.content.attrs[n]);for(var o=0;o<e.children.length;o++){var i=r(e.children[o]);t.appendChild(i)}return null!==e.mailbox&&e.mailbox.send(t),t}function o(e,t){for(var n=e,o=r(t);n.firstChild;)n.removeChild(n.firstChild);n.appendChild(o)}function i(e,t,n){if(!e.length)return t.map(function(e){return[l.Insert,null,e]});if(!t.length)return e.map(function(e){return[l.Delete,e,null]});for(var r=e.length+1,o=t.length+1,i=new Array(r*o),a=[],s=0;s<r;s++)i[s*o]=s;for(var u=0;u<o;u++)i[u]=u;for(var c=1;c<o;c++)for(var d=1;d<r;d++)n(e[d-1],t[c-1])?i[d*o+c]=i[(d-1)*o+(c-1)]:i[d*o+c]=Math.min(i[(d-1)*o+c],i[d*o+(c-1)])+1;for(var p=r-1,f=o-1;0!==p||0!==f;)n(e[p-1],t[f-1])?(p--,f--,a.unshift([l.Merge,e[p],t[f]])):i[p*o+(f-1)]<=i[(p-1)*o+f]?(f--,a.unshift([l.Insert,null,t[f]])):(p--,a.unshift([l.Delete,e[p],null]));return a}function a(e,t,n,o){if(void 0===o&&(o=0),"undefined"==typeof n||null===n)return void e.removeChild(e.childNodes[o]);if("undefined"==typeof t||null===t)return void e.insertBefore(r(n),e.childNodes[o]);if(n.treeType===u.Node){if(t.treeType===u.Node&&t.content.tag===n.content.tag){var s=e.childNodes[o];for(var c in t.content.attrs)c in n.content.attrs||(s.removeAttribute(c),delete s[c]);for(var c in n.content.attrs){var d=n.content.attrs[c];c in t.content.attrs&&d===t.content.attrs[c]||(s[c]=d,s.setAttribute(c,d))}for(var p=i(t.children,n.children,function(e,t){return"undefined"!=typeof e&&e.eq(t)}),f=0,h=0;h<p.length;h++){var v=p[h];a(e.childNodes[o],v[1],v[2],f),v[0]!==l.Delete&&f++}}}else e.replaceChild(r(n),e.childNodes[o])}function s(e,t){e.reduce(null,function(e,n){return null===n?o(t,e):a(t,n,e),e})}t.__esModule=!0,t.el=n;var u;!function(e){e[e.Text=0]="Text",e[e.Node=1]="Node"}(u||(u={}));var c=function(){function e(e,t,n){this.content=e,this.children=t,this.treeType=n,this.mailbox=null,n===u.Node?"key"in this.content.attrs?(this.key=this.content.attrs.key,delete this.content.attrs.key):"id"in this.content.attrs?this.key=this.content.attrs.id:this.key=this.content.tag:this.key="text-node"}return e.prototype.subscribe=function(e){return this.mailbox=e,this},e.prototype.eq=function(e){return!!e&&this.key===e.key},e}();t.VTree=c;var l;!function(e){e[e.Merge=0]="Merge",e[e.Delete=1]="Delete",e[e.Insert=2]="Insert"}(l||(l={})),t.diff_array=i,t.diff_dom=a,t.render=s}.apply(t,r),!(void 0!==o&&(e.exports=o))},function(e,t,n){var r,o;r=[n,t],o=function(e,t){"use strict";function n(){return t.source_words[Math.floor(Math.random()*t.source_words.length)]}t.__esModule=!0;var r="the name of very to through and just form in much is great it think you say that help he low was line for before on turn are cause with same as mean differ his move they right be boy at old one too have does this tell from sentence or set had three by want hot air but well some also what play there small we end can put out home other read were hand all port your large when spell up add use even word land how here said must an big each high she such which follow do act their why time ask if men will change way went about light many kind then off them need would house write picture like try so us these again her animal long point make mother thing world see near him build two self has earth look father more head day stand could own go page come should did country my found sound answer no school most grow number study who still over learn know plant water cover than food call sun first four people thought may let down keep side eye been never now last find door any between new city work tree part cross take since get hard place start made might live story where saw after far back sea little draw only left round late man run year don't came while show press every close good night me real give life our few under stop open ten seem simple together several next vowel white toward children war begin lay got against walk pattern example slow ease center paper love often person always money music serve those appear both road mark map book science letter rule until govern mile pull river cold car notice feet voice care fall second power group town carry fine took certain rain fly eat unit room lead friend cry began dark idea machine fish note mountain wait north plan once figure base star hear box horse noun cut field sure rest watch correct color able face pound wood done main beauty enough drive plain stood girl contain usual front young teach ready week above final ever gave red green list oh though quick feel develop talk sleep bird warm soon free body minute dog strong family special direct mind pose behind leave clear song tail measure produce state fact product street black inch short lot numeral nothing class course wind stay question wheel happen full complete force ship blue area object half decide rock surface order deep fire moon south island problem foot piece yet told busy knew test pass record farm boat top common whole gold king possible size plane heard age best dry hour wonder better laugh true thousand during ago hundred ran am check remember game step shape early yes hold hot west miss ground brought interest heat reach snow fast bed five bring sing sit listen perhaps six fill table east travel weight less language morning among speed typing mineral seven eight nine everything something standard distant paint";t.source_words=r.split(" "),t.random_word=n}.apply(t,r),!(void 0!==o&&(e.exports=o))}])}]);